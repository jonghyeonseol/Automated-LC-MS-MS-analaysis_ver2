<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§¬ í†µí•© LC-MS-MS ë¶„ì„ í”Œë«í¼</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/2.26.0/plotly.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 3.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.3em;
            opacity: 0.9;
        }

        /* ë©”ì¸ ë ˆì´ì•„ì›ƒ */
        .main-layout {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        /* ì™¼ìª½ ì»¨íŠ¸ë¡¤ íŒ¨ë„ */
        .control-sidebar {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            height: fit-content;
        }

        .control-section {
            margin-bottom: 25px;
        }

        .control-section h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.2em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 5px;
        }

        /* íŒŒì¼ ì—…ë¡œë“œ */
        .file-upload {
            border: 3px dashed #667eea;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            margin-bottom: 15px;
        }

        .file-upload:hover {
            border-color: #764ba2;
            background: rgba(102, 126, 234, 0.05);
        }

        .file-upload.dragover {
            border-color: #764ba2;
            background: rgba(102, 126, 234, 0.1);
            transform: scale(1.02);
        }

        /* ì„¤ì • ìŠ¬ë¼ì´ë” */
        .slider-group {
            margin-bottom: 15px;
        }

        .slider-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
            color: #2c3e50;
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .slider {
            flex: 1;
            height: 6px;
            border-radius: 3px;
            background: #e0e0e0;
            outline: none;
            appearance: none;
        }

        .slider::-webkit-slider-thumb {
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }

        .value-display {
            background: #f8f9fa;
            padding: 5px 10px;
            border-radius: 5px;
            font-weight: bold;
            min-width: 60px;
            text-align: center;
            border: 1px solid #e9ecef;
        }

        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
            width: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.4);
        }

        /* ì˜¤ë¥¸ìª½ ë©”ì¸ ì½˜í…ì¸  */
        .main-content {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            min-height: 700px;
        }

        /* íƒ­ ì¸í„°í˜ì´ìŠ¤ */
        .tab-container {
            margin-bottom: 20px;
        }

        .tab-nav {
            display: flex;
            border-bottom: 2px solid #e9ecef;
            margin-bottom: 20px;
        }

        .tab-btn {
            background: none;
            border: none;
            padding: 15px 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            color: #6c757d;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .tab-btn.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .tab-btn:hover:not(.active) {
            color: #495057;
            background-color: #f8f9fa;
        }

        .tab-content {
            min-height: 600px;
        }

        .tab-pane {
            display: none;
        }

        .tab-pane.active {
            display: block;
        }

        /* ì‹œê°í™” ì˜ì—­ */
        .visualization-area {
            border: 1px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            min-height: 500px;
        }

        .plot-container {
            width: 100%;
            height: 600px;
        }

        /* ìƒíƒœ í‘œì‹œ */
        .status-panel {
            background: #f8f9fa;
            border-left: 4px solid #3498db;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            font-family: 'Courier New', monospace;
        }

        /* í†µê³„ ì¹´ë“œ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .stat-number {
            font-size: 2.2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        /* ë²”ë¡€ */
        .legend {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            border: 1px solid #e9ecef;
        }

        .legend h4 {
            margin-top: 0;
            color: #495057;
        }

        .legend-item {
            display: inline-block;
            margin-right: 20px;
            margin-bottom: 10px;
        }

        .legend-color {
            display: inline-block;
            width: 15px;
            height: 15px;
            border-radius: 3px;
            margin-right: 8px;
            vertical-align: middle;
        }

        /* ì»¨íŠ¸ë¡¤ ë²„íŠ¼ */
        .controls {
            text-align: center;
            margin-bottom: 20px;
        }

        .controls .btn {
            width: auto;
            margin: 0 5px;
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 1200px) {
            .main-layout {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 2.5em;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .header h1 {
                font-size: 2em;
            }

            .tab-nav {
                flex-wrap: wrap;
            }

            .tab-btn {
                padding: 10px 15px;
                font-size: 1em;
            }
        }

        /* ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ */
        .loading {
            text-align: center;
            padding: 40px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ê³ ê¸‰ ì»¨íŠ¸ë¡¤ */
        .advanced-controls {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .mode-selector {
            display: flex;
            gap: 5px;
            margin-top: 10px;
        }

        .mode-option {
            flex: 1;
            padding: 8px;
            text-align: center;
            border-radius: 5px;
            background: #e9ecef;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
        }

        .mode-option.active {
            background: #667eea;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- í—¤ë” -->
        <div class="header">
            <h1>ğŸ§¬ í†µí•© LC-MS-MS ë¶„ì„ í”Œë«í¼</h1>
            <p>2D/3D ì‹œê°í™”ì™€ ì‹¤ì‹œê°„ ë¶„ì„ì„ ê²°í•©í•œ ì°¨ì„¸ëŒ€ Ganglioside ë¶„ì„ ë„êµ¬</p>
        </div>

        <!-- ë©”ì¸ ë ˆì´ì•„ì›ƒ -->
        <div class="main-layout">
            <!-- ì™¼ìª½ ì»¨íŠ¸ë¡¤ íŒ¨ë„ -->
            <div class="control-sidebar">
                <!-- íŒŒì¼ ì—…ë¡œë“œ -->
                <div class="control-section">
                    <h3>ğŸ“ ë°ì´í„° ì—…ë¡œë“œ</h3>
                    <div class="file-upload" id="fileUpload" onclick="document.getElementById('csvFile').click();">
                        <div style="font-size: 2em; margin-bottom: 10px;">ğŸ“„</div>
                        <div>CSV íŒŒì¼ ì—…ë¡œë“œ</div>
                        <small>í´ë¦­ ë˜ëŠ” ë“œë˜ê·¸</small>
                        <input type="file" id="csvFile" accept=".csv" style="display: none;">
                    </div>
                    <div id="fileStatus" style="text-align: center; color: #6c757d; font-size: 0.9em;">íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”</div>
                </div>

                <!-- ë¶„ì„ ì„¤ì • -->
                <div class="control-section">
                    <h3>âš™ï¸ ë¶„ì„ ì„¤ì •</h3>

                    <div class="slider-group">
                        <label for="outlierThreshold">ì´ìƒì¹˜ ì„ê³„ê°’</label>
                        <div class="slider-container">
                            <input type="range" id="outlierThreshold" class="slider" min="1.0" max="5.0" step="0.1" value="3.0">
                            <div class="value-display" id="outlierValue">3.0</div>
                        </div>
                    </div>

                    <div class="slider-group">
                        <label for="r2Threshold">RÂ² ì„ê³„ê°’</label>
                        <div class="slider-container">
                            <input type="range" id="r2Threshold" class="slider" min="0.90" max="0.999" step="0.001" value="0.99">
                            <div class="value-display" id="r2Value">0.990</div>
                        </div>
                    </div>

                    <div class="slider-group">
                        <label for="rtTolerance">RT í—ˆìš© ë²”ìœ„</label>
                        <div class="slider-container">
                            <input type="range" id="rtTolerance" class="slider" min="0.05" max="0.5" step="0.01" value="0.1">
                            <div class="value-display" id="rtValue">Â±0.10</div>
                        </div>
                    </div>

                    <div style="margin-top: 15px;">
                        <label>ë¶„ì„ ëª¨ë“œ</label>
                        <div class="mode-selector">
                            <div class="mode-option active" data-mode="Porcine" onclick="selectMode('Porcine')">ğŸ· Porcine</div>
                            <div class="mode-option" data-mode="Mouse" onclick="selectMode('Mouse')">ğŸ­ Mouse</div>
                        </div>
                    </div>
                </div>

                <!-- ë¶„ì„ ë²„íŠ¼ -->
                <div class="control-section">
                    <h3>ğŸš€ ì‹¤í–‰</h3>
                    <button class="btn btn-primary" onclick="runAnalysis()">ë¶„ì„ ì‹œì‘</button>
                    <button class="btn btn-success" onclick="generateIntegratedVisualization()" id="visualizeBtn" style="display: none;">í†µí•© ì‹œê°í™”</button>

                    <div class="advanced-controls">
                        <button class="btn btn-primary" onclick="resetSettings()">ğŸ”„ ì„¤ì • ì´ˆê¸°í™”</button>
                        <button class="btn btn-success" onclick="downloadResults()" id="downloadBtn" style="display: none;">ğŸ’¾ ê²°ê³¼ ë‹¤ìš´ë¡œë“œ</button>
                        <button class="btn btn-primary" onclick="testConnection()" style="background-color: #e74c3c;">ğŸ”Œ ì—°ê²° í…ŒìŠ¤íŠ¸</button>
                    </div>
                </div>

                <!-- ì‹¤ì‹œê°„ ìƒíƒœ -->
                <div class="control-section">
                    <h3>ğŸ“Š ì‹¤ì‹œê°„ ìƒíƒœ</h3>
                    <div id="realtimeStats" style="font-size: 0.9em; color: #6c757d;">
                        ë¶„ì„ ëŒ€ê¸°ì¤‘...
                    </div>
                </div>
            </div>

            <!-- ì˜¤ë¥¸ìª½ ë©”ì¸ ì½˜í…ì¸  -->
            <div class="main-content">
                <!-- íƒ­ ì¸í„°í˜ì´ìŠ¤ -->
                <div class="tab-container">
                    <div class="tab-nav">
                        <button class="tab-btn active" data-tab="analysis">ğŸ“Š ë¶„ì„ ê²°ê³¼</button>
                        <button class="tab-btn" data-tab="visualization-2d">ğŸ“ˆ 2D ì‹œê°í™”</button>
                        <button class="tab-btn" data-tab="visualization-3d">ğŸŒŒ 3D ì‹œê°í™”</button>
                        <button class="tab-btn" data-tab="integrated">ğŸ”„ í†µí•© ë·°</button>
                        <button class="tab-btn" data-tab="statistics">ğŸ“‹ ìƒì„¸ í†µê³„</button>
                    </div>

                    <div class="tab-content">
                        <!-- ë¶„ì„ ê²°ê³¼ íƒ­ -->
                        <div id="analysis" class="tab-pane active">
                            <div class="status-panel" id="statusDisplay">
                                ë¶„ì„ì„ ì‹œì‘í•˜ë ¤ë©´ CSV íŒŒì¼ì„ ì—…ë¡œë“œí•˜ê³  'ë¶„ì„ ì‹œì‘' ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.
                            </div>

                            <div class="stats-grid" id="statsGrid" style="display: none;">
                                <!-- ë™ì ìœ¼ë¡œ ìƒì„± -->
                            </div>

                            <div id="analysisDetails" style="display: none;">
                                <h4>ë¶„ì„ ìƒì„¸ ì •ë³´</h4>
                                <div id="detailsContent"></div>
                            </div>
                        </div>

                        <!-- 2D ì‹œê°í™” íƒ­ -->
                        <div id="visualization-2d" class="tab-pane">
                            <div class="controls">
                                <button class="btn btn-primary" onclick="reset2DView()">ğŸ”„ ì‹œì  ì´ˆê¸°í™”</button>
                                <button class="btn btn-primary" onclick="toggle2DOutliers()">ğŸ‘ï¸ ì´ìƒì¹˜ í† ê¸€</button>
                                <button class="btn btn-primary" onclick="show2DRegression()">ğŸ“ˆ íšŒê·€ì„  í‘œì‹œ</button>
                            </div>

                            <div class="visualization-area">
                                <div id="plot-2d" class="plot-container"></div>
                            </div>

                            <div class="legend">
                                <h4>ë²”ë¡€</h4>
                                <div class="legend-item">
                                    <span class="legend-color" style="background-color: #3498db;"></span>
                                    Anchor í™”í•©ë¬¼ (T)
                                </div>
                                <div class="legend-item">
                                    <span class="legend-color" style="background-color: #2ecc71;"></span>
                                    ìœ íš¨ í™”í•©ë¬¼
                                </div>
                                <div class="legend-item">
                                    <span class="legend-color" style="background-color: #e74c3c;"></span>
                                    ì´ìƒì¹˜
                                </div>
                            </div>
                        </div>

                        <!-- 3D ì‹œê°í™” íƒ­ -->
                        <div id="visualization-3d" class="tab-pane">
                            <div class="controls">
                                <button class="btn btn-primary" onclick="reset3DView()">ğŸ”„ ì‹œì  ì´ˆê¸°í™”</button>
                                <button class="btn btn-primary" onclick="toggle3DOutliers()">ğŸ‘ï¸ ì´ìƒì¹˜ í† ê¸€</button>
                                <button class="btn btn-primary" onclick="toggle3DRegression()">ğŸ“ˆ íšŒê·€í‰ë©´ í† ê¸€</button>
                            </div>

                            <div class="visualization-area">
                                <div id="plot-3d" class="plot-container"></div>
                            </div>

                            <div class="legend">
                                <h4>ì¶• ì •ë³´</h4>
                                <div class="legend-item">
                                    <strong>Xì¶•:</strong> Mass-to-Charge (m/z)
                                </div>
                                <div class="legend-item">
                                    <strong>Yì¶•:</strong> Retention Time (min)
                                </div>
                                <div class="legend-item">
                                    <strong>Zì¶•:</strong> Partition Coefficient (Log P)
                                </div>
                            </div>
                        </div>

                        <!-- í†µí•© ë·° íƒ­ -->
                        <div id="integrated" class="tab-pane">
                            <div class="controls">
                                <button class="btn btn-primary" onclick="refreshIntegratedView()">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>
                                <button class="btn btn-primary" onclick="openIntegratedWindow()">ğŸ”— ìƒˆ ì°½ì—ì„œ ì—´ê¸°</button>
                            </div>

                            <div class="visualization-area">
                                <div id="integratedVisualization" style="min-height: 600px;">
                                    <div style="text-align: center; padding: 50px; color: #6c757d;">
                                        ë¶„ì„ í›„ í†µí•© ì‹œê°í™”ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ìƒì„¸ í†µê³„ íƒ­ -->
                        <div id="statistics" class="tab-pane">
                            <div id="detailedStats">
                                <div style="text-align: center; padding: 50px; color: #6c757d;">
                                    ë¶„ì„ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € ë¶„ì„ì„ ì‹¤í–‰í•´ì£¼ì„¸ìš”.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let currentAnalysisResults = null;
        let currentSettings = {
            outlierThreshold: 3.0,
            r2Threshold: 0.99,
            rtTolerance: 0.1,
            analysisMode: 'Porcine'
        };
        let uploadedFile = null;
        let compoundData = null;

        // ì‹œê°í™” ìƒíƒœ
        let showOutliers2D = true;
        let showOutliers3D = true;
        let showRegression2D = false;
        let showRegression3D = false;

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            initializeEventListeners();
            setupDragAndDrop();
            initializeTabs();
        });

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì´ˆê¸°í™”
        function initializeEventListeners() {
            // ìŠ¬ë¼ì´ë” ì´ë²¤íŠ¸
            document.getElementById('outlierThreshold').addEventListener('input', updateOutlierValue);
            document.getElementById('r2Threshold').addEventListener('input', updateR2Value);
            document.getElementById('rtTolerance').addEventListener('input', updateRtValue);

            // íŒŒì¼ ì—…ë¡œë“œ ì´ë²¤íŠ¸
            document.getElementById('csvFile').addEventListener('change', handleFileUpload);
        }

        // íƒ­ ì´ˆê¸°í™”
        function initializeTabs() {
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const targetTab = this.getAttribute('data-tab');
                    switchTab(targetTab);
                });
            });
        }

        function switchTab(tabId) {
            // ëª¨ë“  íƒ­ ë²„íŠ¼ê³¼ íŒ¨ë„ ë¹„í™œì„±í™”
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-pane').forEach(pane => pane.classList.remove('active'));

            // ì„ íƒëœ íƒ­ í™œì„±í™”
            document.querySelector(`[data-tab="${tabId}"]`).classList.add('active');
            document.getElementById(tabId).classList.add('active');

            // íƒ­ ì „í™˜ ì‹œ í”Œë¡¯ ë¦¬ì‚¬ì´ì¦ˆ
            setTimeout(() => {
                const plotElements = ['plot-2d', 'plot-3d'];
                plotElements.forEach(id => {
                    const element = document.getElementById(id);
                    if (element && element.data) {
                        Plotly.Plots.resize(element);
                    }
                });
            }, 100);
        }

        // ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì„¤ì •
        function setupDragAndDrop() {
            const fileUpload = document.getElementById('fileUpload');

            fileUpload.addEventListener('dragover', function(e) {
                e.preventDefault();
                fileUpload.classList.add('dragover');
            });

            fileUpload.addEventListener('dragleave', function(e) {
                e.preventDefault();
                fileUpload.classList.remove('dragover');
            });

            fileUpload.addEventListener('drop', function(e) {
                e.preventDefault();
                fileUpload.classList.remove('dragover');

                const files = e.dataTransfer.files;
                if (files.length > 0 && files[0].name.endsWith('.csv')) {
                    document.getElementById('csvFile').files = files;
                    handleFileUpload({target: {files: files}});
                }
            });
        }

        // ìŠ¬ë¼ì´ë” ê°’ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ë“¤
        function updateOutlierValue(event) {
            const value = parseFloat(event.target.value);
            document.getElementById('outlierValue').textContent = value.toFixed(1);
            currentSettings.outlierThreshold = value;

            if (uploadedFile) {
                debounceAnalysis();
            }
        }

        function updateR2Value(event) {
            const value = parseFloat(event.target.value);
            document.getElementById('r2Value').textContent = value.toFixed(3);
            currentSettings.r2Threshold = value;

            if (uploadedFile) {
                debounceAnalysis();
            }
        }

        function updateRtValue(event) {
            const value = parseFloat(event.target.value);
            document.getElementById('rtValue').textContent = `Â±${value.toFixed(2)}`;
            currentSettings.rtTolerance = value;

            if (uploadedFile) {
                debounceAnalysis();
            }
        }

        // ë¶„ì„ ëª¨ë“œ ì„ íƒ
        function selectMode(mode) {
            document.querySelectorAll('.mode-option').forEach(option => {
                option.classList.remove('active');
            });

            document.querySelector(`[data-mode="${mode}"]`).classList.add('active');
            currentSettings.analysisMode = mode;

            if (uploadedFile) {
                debounceAnalysis();
            }
        }

        // ì„¤ì • ì´ˆê¸°í™”
        function resetSettings() {
            currentSettings = {
                outlierThreshold: 3.0,
                r2Threshold: 0.99,
                rtTolerance: 0.1,
                analysisMode: 'Porcine'
            };

            document.getElementById('outlierThreshold').value = 3.0;
            document.getElementById('r2Threshold').value = 0.99;
            document.getElementById('rtTolerance').value = 0.1;
            document.getElementById('outlierValue').textContent = '3.0';
            document.getElementById('r2Value').textContent = '0.990';
            document.getElementById('rtValue').textContent = 'Â±0.10';

            selectMode('Porcine');

            if (uploadedFile) {
                runAnalysis();
            }
        }

        // íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬
        function handleFileUpload(event) {
            console.log('File upload event triggered:', event);
            const file = event.target.files[0];
            console.log('Selected file:', file);

            if (!file) {
                console.log('No file selected');
                return;
            }

            if (!file.name.endsWith('.csv')) {
                showStatus('âŒ CSV íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.', 'error');
                console.log('Invalid file type:', file.name);
                return;
            }

            uploadedFile = file;
            console.log('File uploaded successfully:', file.name, file.size, 'bytes');

            document.getElementById('fileStatus').textContent = `âœ… ${file.name} (${(file.size/1024).toFixed(1)} KB)`;
            document.getElementById('fileStatus').style.color = '#27ae60';
            showStatus(`âœ… íŒŒì¼ ì—…ë¡œë“œ ì™„ë£Œ: ${file.name}`, 'success');
        }

        // ë””ë°”ìš´ìŠ¤ ë¶„ì„ ì‹¤í–‰
        let analysisTimeout;
        function debounceAnalysis() {
            clearTimeout(analysisTimeout);
            analysisTimeout = setTimeout(() => {
                runAnalysis(true);
            }, 1000);
        }

        // ë¶„ì„ ì‹¤í–‰
        async function runAnalysis(isAutoReanalysis = false) {
            if (!uploadedFile) {
                showStatus('âŒ ë¨¼ì € CSV íŒŒì¼ì„ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”.', 'error');
                return;
            }

            try {
                const prefix = isAutoReanalysis ? 'ğŸ”„ ì‹¤ì‹œê°„ ì¬ë¶„ì„' : 'ğŸ”¬ ë¶„ì„';
                showStatus(`${prefix} ì§„í–‰ ì¤‘...`, 'loading');
                showRealtimeStatus('ë¶„ì„ ì¤‘...');

                console.log('Starting analysis with file:', uploadedFile.name);

                const formData = new FormData();
                formData.append('file', uploadedFile);
                formData.append('data_type', currentSettings.analysisMode);
                formData.append('outlier_threshold', currentSettings.outlierThreshold);
                formData.append('r2_threshold', currentSettings.r2Threshold);
                formData.append('rt_tolerance', currentSettings.rtTolerance);

                console.log('FormData prepared, sending request...');

                const response = await fetch('/api/analyze', {
                    method: 'POST',
                    body: formData
                });

                console.log('Response received:', response.status);

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                console.log('Data parsed successfully:', data);

                if (data.results) {
                    currentAnalysisResults = data;
                    displayAnalysisResults(data.results, isAutoReanalysis);
                    updateStatsGrid(data.results);
                    prepareVisualizationData(data.results);

                    document.getElementById('visualizeBtn').style.display = 'block';
                    document.getElementById('downloadBtn').style.display = 'block';

                    showRealtimeStatus(`ì„±ê³µë¥ : ${(data.results.statistics.success_rate || 0).toFixed(1)}%`);
                } else {
                    showStatus(`âŒ ë¶„ì„ ì˜¤ë¥˜: ${data.error}`, 'error');
                    showRealtimeStatus('ë¶„ì„ ì‹¤íŒ¨');
                }

            } catch (error) {
                showStatus(`âŒ ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${error.message}`, 'error');
                showRealtimeStatus('ì—°ê²° ì˜¤ë¥˜');
            }
        }

        // ìƒíƒœ í‘œì‹œ
        function showStatus(message, type = 'info') {
            const statusDisplay = document.getElementById('statusDisplay');
            statusDisplay.textContent = message;

            statusDisplay.className = 'status-panel';
            if (type === 'error') {
                statusDisplay.style.borderLeftColor = '#e74c3c';
                statusDisplay.style.background = '#fdf2f2';
            } else if (type === 'success') {
                statusDisplay.style.borderLeftColor = '#27ae60';
                statusDisplay.style.background = '#f2f9f4';
            } else if (type === 'loading') {
                statusDisplay.style.borderLeftColor = '#f39c12';
                statusDisplay.style.background = '#fef9e7';
            } else {
                statusDisplay.style.borderLeftColor = '#3498db';
                statusDisplay.style.background = '#f8f9fa';
            }
        }

        // ì‹¤ì‹œê°„ ìƒíƒœ í‘œì‹œ
        function showRealtimeStatus(message) {
            document.getElementById('realtimeStats').textContent = message;
        }

        // ë¶„ì„ ê²°ê³¼ í‘œì‹œ
        function displayAnalysisResults(results, isAutoReanalysis = false) {
            const stats = results.statistics;
            const prefix = isAutoReanalysis ? 'ğŸ”„ ì‹¤ì‹œê°„ ì¬ë¶„ì„ ì™„ë£Œ!' : 'ğŸ”¬ ë¶„ì„ ì™„ë£Œ!';

            const summary = `${prefix}

=== ë¶„ì„ ìš”ì•½ ===
ì´ í™”í•©ë¬¼ ìˆ˜: ${stats.total_compounds || 'N/A'}
ìœ íš¨ í™”í•©ë¬¼: ${stats.valid_compounds || 'N/A'}
ì´ìƒì¹˜: ${stats.outliers || 'N/A'}
ì„±ê³µë¥ : ${(stats.success_rate || 0).toFixed(1)}%

=== í˜„ì¬ ì„¤ì • ===
í‘œì¤€í™” ì”ì°¨ ì„ê³„ê°’: ${currentSettings.outlierThreshold}
RÂ² ì„ê³„ê°’: ${currentSettings.r2Threshold}
RT í—ˆìš© ë²”ìœ„: Â±${currentSettings.rtTolerance}ë¶„
ë¶„ì„ ëª¨ë“œ: ${currentSettings.analysisMode}

${isAutoReanalysis ? 'âš¡ ì‹¤ì‹œê°„ ëª¨ë“œ: ì„¤ì • ë³€ê²½ì´ ìë™ ë°˜ì˜ë˜ì—ˆìŠµë‹ˆë‹¤.' : ''}`;

            showStatus(summary, 'success');
        }

        // í†µê³„ ê·¸ë¦¬ë“œ ì—…ë°ì´íŠ¸
        function updateStatsGrid(results) {
            const stats = results.statistics;
            const grid = document.getElementById('statsGrid');

            grid.innerHTML = `
                <div class="stat-card">
                    <div class="stat-number">${stats.total_compounds || 0}</div>
                    <div class="stat-label">ì´ í™”í•©ë¬¼</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, #27ae60, #229954);">
                    <div class="stat-number">${stats.valid_compounds || 0}</div>
                    <div class="stat-label">ìœ íš¨ í™”í•©ë¬¼</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, #e74c3c, #c0392b);">
                    <div class="stat-number">${stats.outliers || 0}</div>
                    <div class="stat-label">ì´ìƒì¹˜</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, #f39c12, #e67e22);">
                    <div class="stat-number">${(stats.success_rate || 0).toFixed(1)}%</div>
                    <div class="stat-label">ì„±ê³µë¥ </div>
                </div>
            `;

            grid.style.display = 'grid';
        }

        // ì‹œê°í™” ë°ì´í„° ì¤€ë¹„
        function prepareVisualizationData(results) {
            const valid_compounds = results.valid_compounds || [];
            const outliers = results.outliers || [];
            const all_compounds = valid_compounds.concat(outliers);

            if (all_compounds.length === 0) return;

            // ë°ì´í„° ì¶”ì¶œ ë° m/z ê³„ì‚°
            compoundData = {
                names: all_compounds.map(c => c.Name),
                retention_times: all_compounds.map(c => c.RT),
                log_p_values: all_compounds.map(c => c["Log P"]),
                volumes: all_compounds.map(c => c.Volume),
                anchor_mask: all_compounds.map(c => c.Anchor === "T"),
                outlier_mask: all_compounds.map(c => outliers.includes(c)),
                mass_to_charge: all_compounds.map(c => calculateMassToCharge(c.Name))
            };

            // ìë™ìœ¼ë¡œ 2Dì™€ 3D í”Œë¡¯ ìƒì„±
            create2DPlot();
            create3DPlot();
        }

        // Mass-to-charge ê³„ì‚° (í”„ë¡ íŠ¸ì—”ë“œ ë²„ì „)
        function calculateMassToCharge(compoundName) {
            const pattern = /\((\d+):(\d+);O(\d+)\)/;
            const match = compoundName.match(pattern);

            if (!match) return 800.0;

            const carbonCount = parseInt(match[1]);
            const unsaturation = parseInt(match[2]);
            const oxygenCount = parseInt(match[3]);

            const fattyAcidMW = carbonCount * 12.01 + (2 * carbonCount - 2 * unsaturation) * 1.008 + oxygenCount * 15.999;

            const gangliosideBaseWeights = {
                'GM3': 1200, 'GM2': 1400, 'GM1': 1500, 'GD3': 1500,
                'GD2': 1700, 'GD1': 1800, 'GT3': 1800, 'GT2': 2000,
                'GT1': 2100, 'GQ1': 2400, 'GP1': 2700
            };

            for (const [prefix, baseWeight] of Object.entries(gangliosideBaseWeights)) {
                if (compoundName.startsWith(prefix)) {
                    return baseWeight + fattyAcidMW;
                }
            }

            return 1500 + fattyAcidMW;
        }

        // 2D í”Œë¡¯ ìƒì„±
        function create2DPlot() {
            if (!compoundData) return;

            const traces = [];

            // Anchor í™”í•©ë¬¼
            const anchorIndices = compoundData.anchor_mask.map((isAnchor, idx) => isAnchor && !compoundData.outlier_mask[idx] ? idx : -1).filter(idx => idx >= 0);
            if (anchorIndices.length > 0) {
                traces.push({
                    x: anchorIndices.map(i => compoundData.log_p_values[i]),
                    y: anchorIndices.map(i => compoundData.retention_times[i]),
                    mode: 'markers',
                    type: 'scatter',
                    name: 'Anchor (T)',
                    marker: {
                        color: '#3498db',
                        size: 12,
                        symbol: 'diamond',
                        line: { color: 'white', width: 2 }
                    },
                    text: anchorIndices.map(i => compoundData.names[i]),
                    hovertemplate: '<b>%{text}</b><br>Log P: %{x}<br>RT: %{y}<extra></extra>'
                });
            }

            // ìœ íš¨ í™”í•©ë¬¼
            const validIndices = compoundData.anchor_mask.map((isAnchor, idx) => !isAnchor && !compoundData.outlier_mask[idx] ? idx : -1).filter(idx => idx >= 0);
            if (validIndices.length > 0) {
                traces.push({
                    x: validIndices.map(i => compoundData.log_p_values[i]),
                    y: validIndices.map(i => compoundData.retention_times[i]),
                    mode: 'markers',
                    type: 'scatter',
                    name: 'Valid Compounds',
                    marker: {
                        color: '#2ecc71',
                        size: 8,
                        line: { color: 'white', width: 1 }
                    },
                    text: validIndices.map(i => compoundData.names[i]),
                    hovertemplate: '<b>%{text}</b><br>Log P: %{x}<br>RT: %{y}<extra></extra>'
                });
            }

            // ì´ìƒì¹˜
            if (showOutliers2D) {
                const outlierIndices = compoundData.outlier_mask.map((isOutlier, idx) => isOutlier ? idx : -1).filter(idx => idx >= 0);
                if (outlierIndices.length > 0) {
                    traces.push({
                        x: outlierIndices.map(i => compoundData.log_p_values[i]),
                        y: outlierIndices.map(i => compoundData.retention_times[i]),
                        mode: 'markers',
                        type: 'scatter',
                        name: 'Outliers',
                        marker: {
                            color: '#e74c3c',
                            size: 10,
                            symbol: 'x',
                            line: { width: 2 }
                        },
                        text: outlierIndices.map(i => compoundData.names[i]),
                        hovertemplate: '<b>%{text}</b><br>Log P: %{x}<br>RT: %{y}<br><b>ì´ìƒì¹˜</b><extra></extra>'
                    });
                }
            }

            const layout = {
                title: 'Retention Time vs Log P (2D)',
                xaxis: { title: 'Log P (Partition Coefficient)' },
                yaxis: { title: 'Retention Time (min)' },
                hovermode: 'closest',
                showlegend: true,
                legend: { x: 0.02, y: 0.98 }
            };

            Plotly.newPlot('plot-2d', traces, layout, { responsive: true });
        }

        // 3D í”Œë¡¯ ìƒì„±
        function create3DPlot() {
            if (!compoundData) return;

            const traces = [];

            // Anchor í™”í•©ë¬¼
            const anchorIndices = compoundData.anchor_mask.map((isAnchor, idx) => isAnchor && !compoundData.outlier_mask[idx] ? idx : -1).filter(idx => idx >= 0);
            if (anchorIndices.length > 0) {
                traces.push({
                    x: anchorIndices.map(i => compoundData.mass_to_charge[i]),
                    y: anchorIndices.map(i => compoundData.retention_times[i]),
                    z: anchorIndices.map(i => compoundData.log_p_values[i]),
                    mode: 'markers',
                    type: 'scatter3d',
                    name: 'Anchor (T)',
                    marker: {
                        color: '#3498db',
                        size: 8,
                        symbol: 'diamond',
                        line: { color: 'white', width: 2 }
                    },
                    text: anchorIndices.map(i => compoundData.names[i]),
                    hovertemplate: '<b>%{text}</b><br>m/z: %{x:.1f}<br>RT: %{y:.3f}<br>Log P: %{z:.2f}<extra></extra>'
                });
            }

            // ìœ íš¨ í™”í•©ë¬¼
            const validIndices = compoundData.anchor_mask.map((isAnchor, idx) => !isAnchor && !compoundData.outlier_mask[idx] ? idx : -1).filter(idx => idx >= 0);
            if (validIndices.length > 0) {
                traces.push({
                    x: validIndices.map(i => compoundData.mass_to_charge[i]),
                    y: validIndices.map(i => compoundData.retention_times[i]),
                    z: validIndices.map(i => compoundData.log_p_values[i]),
                    mode: 'markers',
                    type: 'scatter3d',
                    name: 'Valid Compounds',
                    marker: {
                        color: '#2ecc71',
                        size: 6,
                        line: { color: 'white', width: 1 }
                    },
                    text: validIndices.map(i => compoundData.names[i]),
                    hovertemplate: '<b>%{text}</b><br>m/z: %{x:.1f}<br>RT: %{y:.3f}<br>Log P: %{z:.2f}<extra></extra>'
                });
            }

            // ì´ìƒì¹˜
            if (showOutliers3D) {
                const outlierIndices = compoundData.outlier_mask.map((isOutlier, idx) => isOutlier ? idx : -1).filter(idx => idx >= 0);
                if (outlierIndices.length > 0) {
                    traces.push({
                        x: outlierIndices.map(i => compoundData.mass_to_charge[i]),
                        y: outlierIndices.map(i => compoundData.retention_times[i]),
                        z: outlierIndices.map(i => compoundData.log_p_values[i]),
                        mode: 'markers',
                        type: 'scatter3d',
                        name: 'Outliers',
                        marker: {
                            color: '#e74c3c',
                            size: 6,
                            symbol: 'x',
                            line: { width: 2 }
                        },
                        text: outlierIndices.map(i => compoundData.names[i]),
                        hovertemplate: '<b>%{text}</b><br>m/z: %{x:.1f}<br>RT: %{y:.3f}<br>Log P: %{z:.2f}<br><b>ì´ìƒì¹˜</b><extra></extra>'
                    });
                }
            }

            const layout = {
                title: '3D Distribution: m/z vs RT vs Log P',
                scene: {
                    xaxis: { title: 'Mass-to-Charge (m/z)' },
                    yaxis: { title: 'Retention Time (min)' },
                    zaxis: { title: 'Partition Coefficient (Log P)' },
                    camera: {
                        eye: { x: 1.2, y: 1.2, z: 1.2 }
                    }
                },
                showlegend: true,
                legend: { x: 0.02, y: 0.98 }
            };

            Plotly.newPlot('plot-3d', traces, layout, { responsive: true });
        }

        // í†µí•© ì‹œê°í™” ìƒì„±
        async function generateIntegratedVisualization() {
            if (!currentAnalysisResults) {
                showStatus('âŒ ë¶„ì„ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € ë¶„ì„ì„ ì‹¤í–‰í•´ì£¼ì„¸ìš”.', 'error');
                return;
            }

            try {
                showStatus('ğŸ”„ í†µí•© ì‹œê°í™” ìƒì„± ì¤‘...', 'loading');

                const response = await fetch('/api/visualize', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        results: currentAnalysisResults.results
                    })
                });

                const data = await response.json();

                if (data.plots && data.plots.integrated_visualization) {
                    document.getElementById('integratedVisualization').innerHTML = data.plots.integrated_visualization;
                    showStatus('âœ… í†µí•© ì‹œê°í™” ìƒì„± ì™„ë£Œ!', 'success');
                    switchTab('integrated');
                } else {
                    showStatus('âŒ í†µí•© ì‹œê°í™” ìƒì„± ì‹¤íŒ¨', 'error');
                }

            } catch (error) {
                showStatus(`âŒ í†µí•© ì‹œê°í™” ìƒì„± ì¤‘ ì˜¤ë¥˜: ${error.message}`, 'error');
            }
        }

        // í†µí•© ë·° ìƒˆë¡œê³ ì¹¨
        function refreshIntegratedView() {
            generateIntegratedVisualization();
        }

        // í†µí•© ì‹œê°í™” ìƒˆ ì°½ì—ì„œ ì—´ê¸°
        function openIntegratedWindow() {
            if (!currentAnalysisResults) return;

            const newWindow = window.open('', '_blank', 'width=1400,height=900');
            const integratedContent = document.getElementById('integratedVisualization').innerHTML;

            newWindow.document.write(
                '<!DOCTYPE html>' +
                '<html>' +
                '<head>' +
                '    <title>í†µí•© LC-MS-MS ì‹œê°í™”</title>' +
                '    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>' +
                '</head>' +
                '<body>' +
                integratedContent +
                '</body>' +
                '</html>'
            );
            newWindow.document.close();
        }

        // ì»¨íŠ¸ë¡¤ í•¨ìˆ˜ë“¤
        function reset2DView() {
            Plotly.relayout('plot-2d', {
                'xaxis.autorange': true,
                'yaxis.autorange': true
            });
        }

        function reset3DView() {
            Plotly.relayout('plot-3d', {
                'scene.camera': {
                    eye: { x: 1.2, y: 1.2, z: 1.2 }
                }
            });
        }

        function toggle2DOutliers() {
            showOutliers2D = !showOutliers2D;
            create2DPlot();
        }

        function toggle3DOutliers() {
            showOutliers3D = !showOutliers3D;
            create3DPlot();
        }

        function show2DRegression() {
            showRegression2D = !showRegression2D;
            // íšŒê·€ì„  êµ¬í˜„ (ì¶”í›„ ì¶”ê°€ ê°€ëŠ¥)
            create2DPlot();
        }

        function toggle3DRegression() {
            showRegression3D = !showRegression3D;
            // íšŒê·€í‰ë©´ êµ¬í˜„ (ì¶”í›„ ì¶”ê°€ ê°€ëŠ¥)
            create3DPlot();
        }

        // ê²°ê³¼ ë‹¤ìš´ë¡œë“œ
        function downloadResults() {
            if (!currentAnalysisResults) {
                showStatus('âŒ ë¶„ì„ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € ë¶„ì„ì„ ì‹¤í–‰í•´ì£¼ì„¸ìš”.', 'error');
                return;
            }

            try {
                const csvContent = generateCSVFromResults(currentAnalysisResults);
                const blob = new Blob([csvContent], { type: 'text/csv' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `ganglioside_analysis_results_${new Date().toISOString().slice(0,19).replace(/:/g, '-')}.csv`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);

                showStatus('ğŸ’¾ ë¶„ì„ ê²°ê³¼ê°€ ì„±ê³µì ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');

            } catch (error) {
                showStatus(`âŒ ë‹¤ìš´ë¡œë“œ ì˜¤ë¥˜: ${error.message}`, 'error');
            }
        }

        // CSV ìƒì„±
        function generateCSVFromResults(results) {
            let csv = 'Name,RT,Volume,Log P,Anchor,Status,m/z,Analysis_Settings\n';

            const settingsString = `"Outlier:${currentSettings.outlierThreshold}|R2:${currentSettings.r2Threshold}|RT:${currentSettings.rtTolerance}|Mode:${currentSettings.analysisMode}"`;

            // ìœ íš¨ í™”í•©ë¬¼ ì¶”ê°€
            if (results.results.valid_compounds) {
                results.results.valid_compounds.forEach(compound => {
                    const mz = calculateMassToCharge(compound.Name);
                    csv += `"${compound.Name}",${compound.RT},${compound.Volume || 'N/A'},"${compound['Log P']}","${compound.Anchor}","Valid",${mz.toFixed(1)},${settingsString}\n`;
                });
            }

            // ì´ìƒì¹˜ ì¶”ê°€
            if (results.results.outliers) {
                results.results.outliers.forEach(compound => {
                    const reason = compound.outlier_reason || 'Unknown';
                    const mz = calculateMassToCharge(compound.Name);
                    csv += `"${compound.Name}",${compound.RT},${compound.Volume || 'N/A'},"${compound['Log P']}","${compound.Anchor}","Outlier: ${reason}",${mz.toFixed(1)},${settingsString}\n`;
                });
            }

            return csv;
        }

        // ì—°ê²° í…ŒìŠ¤íŠ¸ í•¨ìˆ˜
        async function testConnection() {
            try {
                showStatus('ğŸ”Œ ì„œë²„ ì—°ê²° í…ŒìŠ¤íŠ¸ ì¤‘...', 'loading');
                console.log('Testing server connection...');

                const response = await fetch('/api/health');
                const data = await response.json();

                console.log('Health check response:', data);

                if (response.ok && data.status === 'healthy') {
                    showStatus('âœ… ì„œë²„ ì—°ê²° ì„±ê³µ! ë¶„ì„ ì¤€ë¹„ ì™„ë£Œ.', 'success');
                } else {
                    showStatus('âš ï¸ ì„œë²„ ì‘ë‹µì´ ì´ìƒí•©ë‹ˆë‹¤.', 'error');
                }
            } catch (error) {
                console.error('Connection test failed:', error);
                showStatus(`âŒ ì„œë²„ ì—°ê²° ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        // ì°½ í¬ê¸° ë³€ê²½ ì‹œ í”Œë¡¯ ë¦¬ì‚¬ì´ì¦ˆ
        window.addEventListener('resize', function() {
            ['plot-2d', 'plot-3d'].forEach(id => {
                const element = document.getElementById(id);
                if (element && element.data) {
                    Plotly.Plots.resize(element);
                }
            });
        });

        // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
        document.addEventListener('keydown', function(e) {
            // Ctrl+Enter: ë¶„ì„ ì‹¤í–‰
            if (e.ctrlKey && e.key === 'Enter') {
                e.preventDefault();
                runAnalysis();
            }

            // Ctrl+S: ê²°ê³¼ ë‹¤ìš´ë¡œë“œ
            if (e.ctrlKey && e.key === 's') {
                e.preventDefault();
                if (currentAnalysisResults) {
                    downloadResults();
                }
            }
        });

        console.log('ğŸ§¬ í†µí•© LC-MS-MS ë¶„ì„ í”Œë«í¼ ì´ˆê¸°í™” ì™„ë£Œ!');
        console.log('ğŸ“‹ ë‹¨ì¶•í‚¤: Ctrl+Enter (ë¶„ì„), Ctrl+S (ë‹¤ìš´ë¡œë“œ)');
    </script>
</body>
</html>